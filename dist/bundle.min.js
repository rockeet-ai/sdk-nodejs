!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);throw(f=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",f}c=n[i]={exports:{}},e[i][0].call(c.exports,function(r){return o(e[i][1][r]||r)},c,c.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){const CONFIG={TOKEN:null,ROOT_URL:"https://api.friday.fipsi.at/v1"};class Response{constructor(response){this.response=response}get success(){return this.response.success}get result(){return this.response.result}}module.exports={isLocalFile:fileName=>/(\/.*|[a-zA-Z]:\\(?:([^<>:"\/\\|?*]*[^<>:"\/\\|?*.]\\|..\\)*([^<>:"\/\\|?*]*[^<>:"\/\\|?*.]\\?|..\\))?)/.test(fileName),isFileId:fileId=>/^[a-z]{0,3}_[a-f0-9]{32}$/.test(fileId),extractFileId:(obj,key="fileId",index=0)=>obj instanceof Response?"string"==typeof obj.result||obj.result instanceof String?obj.result:(obj.result instanceof Array?obj.result[index]:obj.result)[key]:obj,endpoint(url,data,method="post",form=!1,raw=!1){return new Promise((resolve,reject)=>{if("get"==method.toLowerCase())return new Promise((resolve,reject)=>{var oReq=new XMLHttpRequest;oReq.addEventListener("load",ev=>{resolve(raw?ev.currentTarget.response:JSON.parse(ev.currentTarget.responseText))}),oReq.open("GET",""+CONFIG.ROOT_URL+url),oReq.setRequestHeader("Authorization",CONFIG.TOKEN),oReq.setRequestHeader("Content-Type","application/json"),oReq.send(JSON.stringify(data))});fetch(""+CONFIG.ROOT_URL+url,{method:method,body:form?data:JSON.stringify(data),headers:form?{Authorization:CONFIG.TOKEN}:{Authorization:CONFIG.TOKEN,"Content-Type":"application/json"}}).then(d=>{raw?resolve(d.arrayBuffer()):d.json().then(d=>{resolve(new Response(d))}).catch(reject)}).catch(reject)})},setToken(token){CONFIG.TOKEN=token},getToken(){return CONFIG.TOKEN},Response:Response}},{}],2:[function(require,module,exports){const endpoint=require("./_helper")["endpoint"];module.exports=class Assistant{constructor(assistantId){this.id=assistantId}delete(){endpoint("/assistant",{assistantId:this.id},"delete")}train(){return endpoint("/assistant/train",{assistantId:this.id},"post")}parse(input,allScores=!1){return new Promise((resolve,reject)=>{endpoint("/assistant/parse",{assistantId:this.id,input:input,allScores:allScores},"post").then(d=>{resolve(d.result)}).catch(er=>{reject(er)})})}get Entity(){return{export:entityName=>endpoint("/assistant/entity",{assistantId:this.id,entityName:entityName},"get"),add:(name,examples,autoExtend=!0,useSynonyms=!0,strictness=1,metadata={})=>endpoint("/assistant/entity",{assistantId:this.id,name:name,examples:examples,autoExtend:autoExtend,useSynonyms:useSynonyms,strictness:strictness,metadata:metadata},"post"),delete:entityName=>endpoint("/assistant/entity",{assistantId:this.id,entityName:entityName},"delete"),list:expand=>new Promise((resolve,reject)=>{endpoint("/assistant/entity",{assistantId:this.id,expand:expand},"get").then(d=>{resolve(d.result)}).catch(er=>{reject(er)})})}}get Intent(){return{add:(name,slots,utterances,metadata)=>endpoint("/assistant/intent",{assistantId:this.id,name:name,slots:slots,utterances:utterances,metadata:metadata},"post"),delete:intentName=>endpoint("/assistant/intent",{assistantId:this.id,intentName:intentName},"delete"),list:(expand=[])=>new Promise((resolve,reject)=>{endpoint("/assistant/intents",{assistantId:this.id,expand:expand},"get").then(d=>{resolve(d.result)}).catch(er=>{reject(er)})}),Utterance:{add:(intentName,utterance,index=void 0)=>endpoint("/assistant/intent/utterance",{assistantId:this.id,intentName:intentName,utterance:utterance,index:index},"put"),delete:(intentName,index)=>endpoint("/assistant/intent/utterance",{assistantId:this.id,intentName:intentName,index:index},"delete"),list:intentName=>new Promise((resolve,reject)=>{endpoint("/assistant/intent/utterance",{assistantId:this.id,intentName:intentName},"get").then(d=>{resolve(d.result)}).catch(er=>{reject(er)})})},Slot:{add:(intentName,entityName,slotName)=>endpoint("/assistant/intent/slot",{assistantId:this.id,intentName:intentName,entityName:entityName,slotName:slotName},"put"),remove:(intentName,slotName)=>endpoint("/assistant/intent/slot",{assistantId:this.id,intentName:intentName,slotName:slotName},"delete"),list:(intentName,expand=!0)=>new Promise((resolve,reject)=>{endpoint("/assistant/intent/slot",{assistantId:this.id,intentName:intentName,expand:expand},"get").then(d=>{resolve(d.result)}).catch(er=>{reject(er)})})}}}static list(){return new Promise((resolve,reject)=>{endpoint("/assistants",{},"get").then(d=>{resolve(d.result)}).catch(er=>{reject(er)})})}static new(name,language,metadata={}){return new Promise((resolve,reject)=>{endpoint("/assistant",{name:name,language:language,metadata:metadata}).then(d=>{resolve(new Assistant(d.result))}).catch(er=>{reject(er)})})}}},{"./_helper":1}],3:[function(require,module,exports){const{extractFileId,endpoint}=require("./_helper");module.exports={toWave:fileId=>(fileId=extractFileId(fileId),endpoint("/audio/wave",{fileId:fileId})),profile:(fileId,name,start=null,end=null,metadata={})=>(console.log(fileId),fileId=extractFileId(fileId),endpoint("/audio/profile",{fileId:fileId,name:name,start:start,end:end,metadata:metadata})),speakers:(fileId,profiles,allChunks=!1,allScores=!1,unknownThreshold=.75,rate=16)=>{fileId=extractFileId(fileId);for(let i=0;i<profiles.length;i++){var profile=profiles[i];profiles[i]=extractFileId(profile)}return endpoint("/audio/speakers",{fileId:fileId,profiles:profiles,allChunks:allChunks,allScores:allScores,unknownThreshold:unknownThreshold,rate:rate})}}},{"./_helper":1}],4:[function(require,module,exports){const{endpoint,extractFileId}=require("./_helper");module.exports={upload:file=>new Promise((resolve,reject)=>{const formData=new FormData;formData.append("file",file),endpoint("/file",formData,method="post",form=!0).then(resolve).catch(reject)}),list:()=>new Promise((resolve,reject)=>{endpoint("/files",{},"get").then(d=>{resolve(d.result)}).catch(reject)}),download:fileId=>(fileId=extractFileId(fileId),endpoint("/file/"+fileId,{},"get",form=!1,raw=!0)),delete:fileId=>{if(fileId instanceof Array){let deleteArray=[];for(let i=0;i<fileId.length;i++){var file=extractFileId(fileId[i]);deleteArray.push(endpoint("/file/"+file,{},"delete"))}return deleteArray}return endpoint("/file/"+fileId,{},"delete")}}},{"./_helper":1}],5:[function(require,module,exports){const File=require("./file"),{endpoint,extractFileId,isFileId,isLocalFile}=require("./_helper");module.exports={faces:(fileId,sensitivity=.9,nms=.3,scale=1)=>new Promise(async(resolve,reject)=>{fileId=extractFileId(fileId);let deleteAfterProcessing=!1;isFileId(fileId)||(fileId=extractFileId(await File.upload(fileId)),deleteAfterProcessing=!0),endpoint("/image/faces",{fileId:fileId,sensitivity:sensitivity,nms:nms,scale:scale}).then(d=>{deleteAfterProcessing&&File.delete(fileId),resolve(d)}).catch(reject)}),person:async(name,profile,metadata={})=>(console.log(profile),profile=extractFileId(profile,"profile"),isLocalFile(profile)&&(profile=extractFileId(await module.exports.faces(profile),"profile")),endpoint("/image/person",{name:name,profile:profile,metadata:metadata})),identify:(fileId,profiles=[],sensitivity=.9,nms=.3,scale=1,similarity=.9)=>(fileId=extractFileId(fileId),profiles=profiles.map(profile=>extractFileId(profile,"profile")),endpoint("/image/identify",{fileId:fileId,profiles:profiles,sensitivity:sensitivity,nms:nms,scale:scale,similarity:similarity})),similarity:(profile1,profile2,range=!1)=>(profile1=extractFileId(profile1,"profile"),profile2=extractFileId(profile2,"profile"),endpoint("/image/similarity",{profile1:profile1,profile2:profile2,range:range}))}},{"./_helper":1,"./file":4}],6:[function(require,module,exports){const{extractFileId,endpoint}=require("./_helper");module.exports={faces:(fileId,profiles,sensitivity=.9,nms=.3,scale=1,similarity=.9,detectionFramesPerSecond=2)=>{fileId=extractFileId(fileId);for(let i=0;i<profiles.length;i++){var profile=profiles[i];profiles[i]=extractFileId(profile)}return endpoint("/video/faces",{fileId:fileId,profiles:profiles,sensitivity:sensitivity,nms:nms,scale:scale,similarity:similarity,detectionFramesPerSecond:detectionFramesPerSecond})}}},{"./_helper":1}],7:[function(require,module,exports){module.exports={Assistant:require("./lib/assistant"),File:require("./lib/file"),Image:require("./lib/image"),Video:require("./lib/video"),Audio:require("./lib/audio"),setToken:require("./lib/_helper").setToken}},{"./lib/_helper":1,"./lib/assistant":2,"./lib/audio":3,"./lib/file":4,"./lib/image":5,"./lib/video":6}]},{},[7]);